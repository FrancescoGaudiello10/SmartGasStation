<head>
    <style>
        h5 {
            border: 5px solid black;
            border-radius: 25px;
            background-color: green;
        }
    </style>
</head>

<br>

<% if @implant.count('Implants.idImpianto').length > 0 %>
    <h1> <%= @implant.count('Implants.idImpianto').length %> impianti trovati </h1>
<% else %>
    <h1> Nessun impianto trovato </h1>
<% end %>

<br>
<h5 align="center">
    
<!-- https://melvinchng.github.io/rails/GoogleMap.html#64-add-google-map-to-view -->
<div style='width: 100%;'>  
  <div id="map" style='width: 100%; height: 450px;'></div>  
</div> 

</h5>
</br>

<script type="text/javascript">  
handler = Gmaps.build('Google');  
handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){  
    markers = handler.addMarkers(<%=raw @routers_default.to_json %>);
    
    circle = [{lng: <%= @coord[1] %>, lat: <%= @coord[0]%>, radius: <%= @raggio %> * 1410  }] //1400 e' fattore di correzione per il raggio
    circle_options = { strokeColor:"#FF0000",strokeOpacity: 1, strokeWeight: 3, fillColor: 'transparent' }
    
    handler.bounds.extendWith(markers); 
    handler.addCircles(circle, circle_options);         
    handler.fitMapToBounds();  
});  
</script>

<br>
<% @implant.each do |i| %>
    <table style="width:100%">
        <tr>
            <div class="col-md-2"> <h4> <%= i.Bandiera.upcase %> </h4> </div>
            <div class="col-md-2"> <h4> <b> â‚¬<%= i.prezzo %> </b> </h4> </div>
            <div class="col-md-2"> <h4> <%= i.descCarburante %> </h4> </div>
            <div class="col-md-2">      <%= i.Indirizzo.humanize[0..-7] %>,<%= i.Comune.humanize %> (<%= i.Provincia %>)</div>
            <div class="col-md-2"> <h4> <%= link_to 'Dettagli', implant_path(i) %> </h4> </div>
            <div class="col-md-2"> <h4> <%= link_to 'Vado qui', calc_path(id: i, tipo_carburante: params[:tipo_carburante])%> </h4></div>
        </tr>
    </table>
<% end %>

